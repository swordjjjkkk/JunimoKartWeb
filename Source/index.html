<!DOCTYPE html> 
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  </head>
  <style>
    body {
      background-color: #121212;
      color: #ddd;
      font-family: Verdana, Geneva, Tahoma, sans-serif;
      font-size: small;
    }
    a {
      color: #809fff;
    }
  </style>
  <body onload="onLoad()" width="100%">
    <script type="text/javascript" src="../Libraries/XNA/LZX.js"></script>
    <script type="text/javascript">
      var jsilConfig = {
        printStackTrace: false,
        xna: 4,
        disableFiltering: true,

        manifests: [
          "JunimoKart.exe",
          "Content/JunimoKart.contentproj"
        //   "Content/YOUR APPLICATION NAME.contentproj"
        ],
      };
      function toggleInfo() {
        const x = document.getElementById('info');
        if (x.style.display === "none") {
          x.style.display = "block";
        } else {
          x.style.display = "none";
        }
      }
    </script>
    <script src="../Libraries/JSIL.js" type="text/javascript"></script>
    
    <div style="margin-left: auto; margin-right:auto; width:1200px; padding:0; height:calc(100%-680px); overflow-y:auto">
      <canvas id="canvas" width="1200" height="660">
      </canvas>
      <br/>
      <button style="float:right" onclick="toggleInfo()">Hide/Show Info</button>
      <div id="info" style="width: 1100px; margin-left: auto; margin-right:auto;">
        <p><b>Instructions</b>: Jump with Left Click/Space/Enter. Esc/P to pause. That's it!</p>
        <p>
          <b>About:</b> Welcome to JunimoKart (Web), a fan-made implementation of the mini-game from <a href="https://www.stardewvalley.net/">Stardew Valley</a>!
          If you enjoy this game, you'll absolutely love <a href="https://www.stardewvalley.net/">Stardew Valley</a>, so go buy it!
        </p>
        <p>
          <form method="GET" action="index.html" style="display:inline">
            <b>Select Mode/Level</b>: 
            Mode:
            <select name="mode">
                <option value="3">Progress</option>
                <option value="2">Endless</option>
            </select>
            Start Level:
            <select name="level">
                <option value="0">Crumble Cavern</option>
                <option value="1">Slippery Slopes</option>
                <option value="8">???</option>
                <option value="2">The Gem Sea Giant</option>
                <option value="3">Ghastly Galleon</option>
                <option value="5">Slomp's Stomp</option>
                <option value="4">Red Hot Rollercoaster</option>
                <option value="6">Sunset Speedway</option>
                <option value="9">Glowshroom Grotto</option>
                <option value="7">Win Screen</option>
            </select>
            <input type="submit">
          </form>
        </p>
        <p><b>Ownership</b>: All assets ceremoniously lifted from <a href="https://www.stardewvalley.net/">Stardew Valley</a> by Concerned Ape.</p>
        <p>
          <b>Report Bugs</b>: Open an issue on <a href="https://github.com/thomaswp/JunimoKartWeb/issues">this page</a>.
          Make sure to copy the text in the Log below, as well as any errors in your browser's 
          <a href="https://balsamiq.com/support/faqs/browserconsole/">javascript console</a>.
        </p>
        <b>Log</b>:<br/>
        <div id="log"></div>
      </div>
    </div>

    <script type="text/javascript">
      function runMain () {
        const urlParams = new URLSearchParams(document.location.search);
        const mode = urlParams.get('mode') || 3;
        const level = urlParams.get('level') || 0;
        // We can't invoke Main() since it disposes the Game immediately, breaking everything.
        var asm = JSIL.GetAssembly("JunimoKart, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", true);
        var game = new asm.JunimoKart.Game1(mode, level);
        game.Run();
      };
    </script>
  </body>
</html>